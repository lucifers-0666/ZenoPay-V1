<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Government Banking System</title>

    <link rel="stylesheet" href="/css/output.css">

    <!-- Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#1e40af",
              secondary: "#3b82f6",
            },
          },
        },
      };
    </script>

      <style>
      /* Custom scrollbar for better aesthetics */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

       /* Loader Overlay */
      .loader-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.8);
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(2px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .loader-overlay.active {
        opacity: 1;
        pointer-events: all;
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #2563eb; /* Blue-600 */
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Toast Notification */
      #toast-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 10000;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .toast {
        min-width: 300px;
        padding: 16px;
        border-radius: 8px;
        color: white;
        font-weight: 500;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        animation: slideIn 0.3s ease-out forwards;
        display: flex;
        align-items: center;
      }

      .toast.success {
        background-color: #10b981;
      }
      .toast.error {
        background-color: #ef4444;
      }
      .toast.warning {
        background-color: #f59e0b;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body
   
  >

<!-- Toast Notification Element -->
<div
  id="toast"
  class="fixed top-5 right-5 bg-white border-l-4 border-green-500 rounded-lg shadow-2xl p-4 transform translate-x-[400px] transition-transform duration-300 z-50 max-w-md flex items-center"
  style="margin-top: 5rem"
>
  <i
    id="toastIcon"
    class="fas fa-check-circle text-green-500 text-2xl mr-3"
  ></i>
  <div class="flex-1">
    <p id="toastMessage" class="font-semibold text-gray-800"></p>
  </div>
  <button
    type="button"
    onclick="hideToast()"
    class="ml-4 text-gray-400 hover:text-gray-600"
  >
    <i class="fas fa-times"></i>
  </button>
</div>

<!-- Navigation Bar -->
<nav class="bg-white shadow-lg border-b-4 border-blue-600 sticky top-0 z-40">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between py-4">
      <!-- Logo -->
      <div
        class="flex items-center cursor-pointer"
        onclick="window.location.href='index.html'"
      >
        <i class="fas fa-landmark text-blue-600 text-2xl mr-3"></i>
        <div>
          <h1 class="text-xl font-bold text-gray-800">ðŸ‡®ðŸ‡³ Government Banking</h1>
          <p class="text-xs text-gray-600">Reserve Bank of India</p>
        </div>
      </div>

      <!-- Navigation Links (Desktop) -->
      <div class="hidden md:flex items-center space-x-6">
        <a
          href="/"
          class="text-gray-700 hover:text-blue-600 font-semibold transition-colors"
        >
          <i class="fas fa-home mr-1"></i> Dashboard
        </a>
        <a
          href="/TransactionHistory"
          class="text-gray-700 hover:text-blue-600 font-semibold transition-colors"
        >
          <i class="fas fa-eye mr-1"></i> Transaction-History
        </a>
        <a
          href="Transfer"
          class="text-gray-700 hover:text-blue-600 font-semibold transition-colors"
        >
          <i class="fas fa-exchange-alt mr-1"></i> Transactions
        </a>
        <a
          href="/Profile"
          class="text-gray-700 hover:text-blue-600 font-semibold transition-colors"
        >
          <i class="fas fa-user mr-1"></i> Profile
        </a>
        <button
          onclick="logout()"
          class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors"
        >
          <i class="fas fa-sign-out-alt mr-1"></i> Logout
        </button>
      </div>

      <!-- Mobile Menu Button -->
      <button
        type="button"
        onclick="toggleMobileMenu()"
        class="md:hidden text-gray-700 focus:outline-none"
      >
        <i class="fas fa-bars text-2xl"></i>
      </button>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="hidden md:hidden pb-4">
      <a
        href="index.html"
        class="block py-2 text-gray-700 hover:text-blue-600 font-semibold"
        >Dashboard</a
      >
      <a
        href="#"
        class="block py-2 text-gray-700 hover:text-blue-600 font-semibold"
        >View Account</a
      >
      <a
        href="#"
        class="block py-2 text-gray-700 hover:text-blue-600 font-semibold"
        >Transactions</a
      >
      <a
        href="user-profile.html"
        class="block py-2 text-gray-700 hover:text-blue-600 font-semibold"
        >Profile</a
      >
      <a href="/logout" class="block py-2 text-red-500 font-semibold">Logout</a>
    </div>
  </div>
</nav>

<script>
  // --- Toast & Utility Functions ---

  function showToast(message, type = "success") {
    const toast = document.getElementById("toast");
    const toastIcon = document.getElementById("toastIcon");
    const toastMessage = document.getElementById("toastMessage");

    if (!toast) return;

    toastMessage.textContent = message;

    if (type === "success") {
      toastIcon.className = "fas fa-check-circle text-green-500 text-2xl mr-3";
      toast.classList.remove("border-red-500", "border-yellow-500");
      toast.classList.add("border-green-500");
    } else if (type === "error") {
      toastIcon.className = "fas fa-times-circle text-red-500 text-2xl mr-3";
      toast.classList.remove("border-green-500", "border-yellow-500");
      toast.classList.add("border-red-500");
    } else if (type === "warning") {
      toastIcon.className =
        "fas fa-exclamation-triangle text-yellow-500 text-2xl mr-3";
      toast.classList.remove("border-green-500", "border-red-500");
      toast.classList.add("border-yellow-500");
    }

    toast.style.transform = "translateX(0)";
    setTimeout(hideToast, 4000);
  }

  function hideToast() {
    const toast = document.getElementById("toast");
    if (toast) {
      toast.style.transform = "translateX(500px)";
    }
  }

  function toggleMobileMenu() {
    const menu = document.getElementById("mobileMenu");
    menu.classList.toggle("hidden");
  }

  async function logout() {
    showToast("Processing logout...", "success");

    try {
      const res = await fetch("/logout", {
        method: "GET",
        headers: {
          Accept: "application/json",
        },
      });

      const data = await res.json();

      if (data.success) {
        showToast(data.message, "success");
        setTimeout(() => {
          window.location.href = "/login";
        }, 1200);
      } else {
        showToast(data.message, "error");
      }
    } catch (error) {
      showToast("Server error! Logout failed.", "error");
    }
  }
</script>
