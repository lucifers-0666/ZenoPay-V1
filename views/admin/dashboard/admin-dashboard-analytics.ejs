<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Statistics - ZenoPay Admin</title>
</head>
<body>
  <%- include('../layouts/admin-layout', { 
    pageContent: `
      <!-- Statistics Page -->
      <div class="admin-content">
        
        <!-- Page Header -->
        <div class="page-header">
          <div>
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
              <svg class="page-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 32px; height: 32px; color: var(--primary);">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
              </svg>
              <h1 class="page-title">Statistics</h1>
            </div>
            <p class="page-subtitle">Deep insights into platform performance</p>
          </div>
        </div>

        <!-- Filter Bar -->
        <div class="stats-filter-bar">
          <!-- Left: Tabs -->
          <div class="filter-tabs">
            <button class="filter-tab active" data-tab="overview">Overview</button>
            <button class="filter-tab" data-tab="users">Users</button>
            <button class="filter-tab" data-tab="merchants">Merchants</button>
            <button class="filter-tab" data-tab="banks">Banks</button>
            <button class="filter-tab" data-tab="transactions">Transactions</button>
          </div>

          <!-- Right: Controls -->
          <div class="filter-controls">
            <div class="filter-control">
              <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
              </svg>
              <select id="dateRange" class="filter-select">
                <option value="7">Last 7 Days</option>
                <option value="30">Last 30 Days</option>
                <option value="90">Last 90 Days</option>
                <option value="365">Last Year</option>
                <option value="custom">Custom Range</option>
              </select>
            </div>

            <div class="filter-control">
              <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
              </svg>
              <select id="statusFilter" class="filter-select">
                <option value="all">All Status</option>
                <option value="success">Success</option>
                <option value="failed">Failed</option>
                <option value="flagged">Flagged</option>
              </select>
            </div>

            <button class="btn-secondary" id="exportBtn">
              <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
              </svg>
              Export
            </button>
          </div>
        </div>

        <!-- Summary Cards -->
        <div class="stats-grid">
          <!-- Total Volume -->
          <div class="stat-card blue">
            <div class="stat-icon-wrapper">
              <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.125-1.125v.375c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125v-2.25a1.125 1.125 0 0 1 1.125-1.125H20.25M3.75 15h16.5v-3h-16.5z" />
              </svg>
            </div>
            <div class="stat-content">
              <p class="stat-label">Total Volume</p>
              <h3 class="stat-value">₹128.5M</h3>
              <div class="stat-change positive">
                <svg class="change-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" />
                </svg>
                +24.3% from last month
              </div>
            </div>
          </div>

          <!-- Total Transactions -->
          <div class="stat-card purple">
            <div class="stat-icon-wrapper">
              <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />
              </svg>
            </div>
            <div class="stat-content">
              <p class="stat-label">Total Transactions</p>
              <h3 class="stat-value">84,392</h3>
              <div class="stat-change positive">
                <svg class="change-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" />
                </svg>
                +18.2% from last month
              </div>
            </div>
          </div>

          <!-- Success Rate -->
          <div class="stat-card emerald">
            <div class="stat-icon-wrapper">
              <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
            </div>
            <div class="stat-content">
              <p class="stat-label">Success Rate</p>
              <h3 class="stat-value">97.8%</h3>
              <div class="stat-change positive">
                <svg class="change-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" />
                </svg>
                +2.1% improvement
              </div>
            </div>
          </div>

          <!-- Chargebacks -->
          <div class="stat-card orange">
            <div class="stat-icon-wrapper">
              <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
              </svg>
            </div>
            <div class="stat-content">
              <p class="stat-label">Chargebacks / Disputes</p>
              <h3 class="stat-value">127</h3>
              <div class="stat-change negative">
                <svg class="change-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181" />
                </svg>
                -5.8% from last month
              </div>
            </div>
          </div>
        </div>

        <!-- Main Charts Section -->
        <div class="charts-grid">
          <!-- Transactions by Day -->
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <h3 class="chart-title">Transactions by Day</h3>
                <p class="chart-subtitle">Last 30 days comparison</p>
              </div>
              <select class="chart-filter" id="transactionChartFilter">
                <option value="30">30 Days</option>
                <option value="90">90 Days</option>
                <option value="180">6 Months</option>
              </select>
            </div>
            <div class="chart-body">
              <canvas id="transactionsDayChart"></canvas>
            </div>
          </div>

          <!-- Channel Breakdown -->
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <h3 class="chart-title">Channel Breakdown</h3>
                <p class="chart-subtitle">Traffic by source</p>
              </div>
            </div>
            <div class="chart-body">
              <canvas id="channelBreakdownChart"></canvas>
            </div>
            <div class="chart-legend">
              <div class="legend-item">
                <span class="legend-dot blue"></span>
                <span class="legend-text">Web</span>
                <span class="legend-value">42.5%</span>
              </div>
              <div class="legend-item">
                <span class="legend-dot purple"></span>
                <span class="legend-text">Mobile App</span>
                <span class="legend-value">31.8%</span>
              </div>
              <div class="legend-item">
                <span class="legend-dot" style="background: #06b6d4;"></span>
                <span class="legend-text">API</span>
                <span class="legend-value">20.4%</span>
              </div>
              <div class="legend-item">
                <span class="legend-dot" style="background: #f59e0b;"></span>
                <span class="legend-text">Other</span>
                <span class="legend-value">5.3%</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Secondary Analytics Section -->
        <div class="analytics-grid">
          <!-- Failure Reasons -->
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <h3 class="chart-title">Failure Reasons</h3>
                <p class="chart-subtitle">Top causes of failed transactions</p>
              </div>
            </div>
            <div class="chart-body">
              <canvas id="failureReasonsChart"></canvas>
            </div>
          </div>

          <!-- Top Merchant Volume -->
          <div class="table-card">
            <div class="table-header">
              <h3 class="table-title">Top Merchant Volume</h3>
            </div>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Merchant</th>
                    <th>Volume</th>
                    <th>Share</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>TechStore Pro</td>
                    <td class="amount">₹12.5M</td>
                    <td>18.2%</td>
                    <td><span class="badge success">Active</span></td>
                  </tr>
                  <tr>
                    <td>Fashion Hub</td>
                    <td class="amount">₹9.8M</td>
                    <td>14.3%</td>
                    <td><span class="badge success">Active</span></td>
                  </tr>
                  <tr>
                    <td>FoodMart</td>
                    <td class="amount">₹8.2M</td>
                    <td>12.0%</td>
                    <td><span class="badge success">Active</span></td>
                  </tr>
                  <tr>
                    <td>BookWorld</td>
                    <td class="amount">₹6.5M</td>
                    <td>9.5%</td>
                    <td><span class="badge pending">Review</span></td>
                  </tr>
                  <tr>
                    <td>ElectroShop</td>
                    <td class="amount">₹5.9M</td>
                    <td>8.6%</td>
                    <td><span class="badge success">Active</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Detailed Statistics Table -->
        <div class="table-card">
          <div class="table-header">
            <h3 class="table-title">Detailed Statistics</h3>
          </div>
          <div class="table-wrapper">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Metric</th>
                  <th>Today</th>
                  <th>Last 7 Days</th>
                  <th>Last 30 Days</th>
                  <th>Trend</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>New Users</strong></td>
                  <td>342</td>
                  <td>2,456</td>
                  <td>12,583</td>
                  <td>
                    <span class="trend-pill positive">
                      <svg class="trend-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                      +12.5%
                    </span>
                  </td>
                </tr>
                <tr>
                  <td><strong>Active Merchants</strong></td>
                  <td>128</td>
                  <td>892</td>
                  <td>3,248</td>
                  <td>
                    <span class="trend-pill positive">
                      <svg class="trend-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                      +8.3%
                    </span>
                  </td>
                </tr>
                <tr>
                  <td><strong>Processed Volume</strong></td>
                  <td>₹4.2M</td>
                  <td>₹28.5M</td>
                  <td>₹128.5M</td>
                  <td>
                    <span class="trend-pill positive">
                      <svg class="trend-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                      +24.3%
                    </span>
                  </td>
                </tr>
                <tr>
                  <td><strong>Failed Transactions</strong></td>
                  <td>28</td>
                  <td>182</td>
                  <td>842</td>
                  <td>
                    <span class="trend-pill negative">
                      <svg class="trend-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                      </svg>
                      -3.2%
                    </span>
                  </td>
                </tr>
                <tr>
                  <td><strong>Chargebacks</strong></td>
                  <td>4</td>
                  <td>28</td>
                  <td>127</td>
                  <td>
                    <span class="trend-pill negative">
                      <svg class="trend-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                      </svg>
                      -5.8%
                    </span>
                  </td>
                </tr>
                <tr>
                  <td><strong>Average Transaction</strong></td>
                  <td>₹1,524</td>
                  <td>₹1,489</td>
                  <td>₹1,523</td>
                  <td>
                    <span class="trend-pill positive">
                      <svg class="trend-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                      +2.3%
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    `,
    breadcrumbs: [
      { name: 'Dashboard', href: '/admin/dashboard' },
      { name: 'Statistics', href: '/admin/analytics', active: true }
    ]
  }) %>
</body>
</html>
      <small class="form-help">↑ 1% from previous period</small>
    </div>
  </div>
  
  <div class="card">
    <div class="card-body">
      <div class="stat-label">Failed Transactions</div>
      <div class="stat-value">678</div>
      <small class="form-help">↓ 2% from previous period</small>
    </div>
  </div>
</div>
