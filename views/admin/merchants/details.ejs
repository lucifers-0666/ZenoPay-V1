<%- include('../layouts/admin-layout', { 
    title: 'Merchant Details - ZenoPay Admin',
    breadcrumb: [
        { name: 'Dashboard', url: '/admin' },
        { name: 'Merchants', url: '/admin/merchants' },
        { name: 'Details', url: '' }
    ],
    content: `
        <!-- Page Header -->
        <div class="page-header-admin">
            <div style="display: flex; align-items: center; gap: 16px;">
                <button class="btn-icon" onclick="history.back()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <div>
                    <h1 class="page-title-admin" id="merchantName">Merchant Details</h1>
                    <p class="page-subtitle" id="merchantId">Loading...</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn-text" onclick="exportMerchantData()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Export
                </button>
                <button class="btn-secondary" onclick="editMerchant()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                    </svg>
                    Edit
                </button>
                <button class="btn-danger" onclick="suspendMerchant()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                        <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                    Suspend
                </button>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="stats-grid" id="quickStats">
            <!-- Populated by JS -->
        </div>

        <!-- Two Column Layout -->
        <div class="details-grid-2col">
            <!-- Left Column -->
            <div class="details-column">
                <!-- Business Information -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Business Information</h3>
                        <span class="badge-success" id="statusBadge">Active</span>
                    </div>
                    <div class="details-section" id="businessInfo">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Owner Information -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Owner Information</h3>
                    </div>
                    <div class="details-section" id="ownerInfo">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Bank Details -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Bank Account Details</h3>
                        <button class="btn-icon-small" onclick="verifyBankAccount()" title="Verify">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="details-section" id="bankInfo">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Documents -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Documents</h3>
                        <button class="btn-text-small" onclick="viewAllDocuments()">View All</button>
                    </div>
                    <div class="documents-list" id="documentsList">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="details-column">
                <!-- Transaction Overview -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Transaction Overview</h3>
                        <select class="filter-select-small" id="periodFilter" onchange="updateTransactionCharts()">
                            <option value="7">Last 7 Days</option>
                            <option value="30" selected>Last 30 Days</option>
                            <option value="90">Last 90 Days</option>
                        </select>
                    </div>
                    <div class="chart-container" style="height: 200px;">
                        <canvas id="transactionChart"></canvas>
                    </div>
                </div>

                <!-- Settlement Information -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Settlement Information</h3>
                    </div>
                    <div class="details-section" id="settlementInfo">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Commission & Fees -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Commission & Fees</h3>
                        <button class="btn-text-small" onclick="editCommission()">Edit</button>
                    </div>
                    <div class="details-section" id="commissionInfo">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Recent Transactions</h3>
                        <button class="btn-text-small" onclick="viewAllTransactions()">View All</button>
                    </div>
                    <div class="transactions-list" id="recentTransactions">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Activity Log -->
                <div class="card-modern">
                    <div class="card-header-section">
                        <h3 class="card-title">Activity Log</h3>
                    </div>
                    <div class="activity-timeline" id="activityLog">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Actions Panel -->
        <div class="card-modern">
            <div class="card-header-section">
                <h3 class="card-title">Admin Actions</h3>
            </div>
            <div class="admin-actions-grid">
                <button class="action-card" onclick="sendNotification()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span>Send Notification</span>
                </button>
                <button class="action-card" onclick="adjustLimits()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="16"></line>
                        <line x1="8" y1="12" x2="16" y2="12"></line>
                    </svg>
                    <span>Adjust Limits</span>
                </button>
                <button class="action-card" onclick="viewDisputes()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    <span>View Disputes</span>
                </button>
                <button class="action-card" onclick="generateStatementReport()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                    </svg>
                    <span>Generate Report</span>
                </button>
            </div>
        </div>
    `
}) %>
