<%- include('../layouts/admin-layout', { 
    title: 'All Transactions - ZenoPay Admin',
    breadcrumb: [
        { name: 'Dashboard', url: '/admin' },
        { name: 'Transactions', url: '' }
    ],
    content: `
        <div class="page-header-admin">
            <div>
                <h1 class="page-title-admin">All Transactions</h1>
                <p class="page-subtitle">View and manage all payment transactions</p>
            </div>
            <div class="header-actions">
                <button class="btn-secondary" onclick="exportTransactions()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                    Export CSV
                </button>
                <button class="btn-primary" onclick="refreshTransactions()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                    Refresh
                </button>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-mini-card">
                <div class="stat-mini-icon" style="background: var(--info-light); color: var(--info);"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg></div>
                <div class="stat-mini-content">
                    <div class="stat-mini-label">Total Transactions</div>
                    <div class="stat-mini-value" id="totalTxns">0</div>
                </div>
            </div>
            <div class="stat-mini-card">
                <div class="stat-mini-icon" style="background: var(--success-light); color: var(--success);"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
                <div class="stat-mini-content">
                    <div class="stat-mini-label">Successful</div>
                    <div class="stat-mini-value" id="successTxns">0</div>
                </div>
            </div>
            <div class="stat-mini-card">
                <div class="stat-mini-icon" style="background: var(--error-light); color: var(--error);"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div>
                <div class="stat-mini-content">
                    <div class="stat-mini-label">Failed</div>
                    <div class="stat-mini-value" id="failedTxns">0</div>
                </div>
            </div>
            <div class="stat-mini-card">
                <div class="stat-mini-icon" style="background: var(--primary-light); color: var(--primary);"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg></div>
                <div class="stat-mini-content">
                    <div class="stat-mini-label">Total Volume</div>
                    <div class="stat-mini-value" id="totalVolume">₹0</div>
                </div>
            </div>
        </div>

        <div class="card-modern">
            <div class="search-filter-bar">
                <div class="search-input-wrapper">
                    <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search by transaction ID, merchant, customer...">
                    <div class="search-spinner" id="searchSpinner" style="display: none;"></div>
                </div>
                <button class="btn-secondary filter-toggle-btn" onclick="toggleFilters()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
                    Filters
                </button>
            </div>

            <div class="filter-panel" id="filterPanel" style="display: none;">
                <div class="filter-grid">
                    <div class="filter-item">
                        <label class="filter-label">Status</label>
                        <select id="statusFilter" class="filter-select">
                            <option value="">All Status</option>
                            <option value="success">Success</option>
                            <option value="failed">Failed</option>
                            <option value="pending">Pending</option>
                            <option value="refunded">Refunded</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label class="filter-label">Payment Method</label>
                        <select id="methodFilter" class="filter-select">
                            <option value="">All Methods</option>
                            <option value="upi">UPI</option>
                            <option value="card">Card</option>
                            <option value="netbanking">Net Banking</option>
                            <option value="wallet">Wallet</option>
                        </select>
</div>
                    <div class="filter-item">
                        <label class="filter-label">Amount Range</label>
                        <select id="amountFilter" class="filter-select">
                            <option value="">All Amounts</option>
                            <option value="0-1000">₹0 - ₹1,000</option>
                            <option value="1000-5000">₹1,000 - ₹5,000</option>
                            <option value="5000-25000">₹5,000 - ₹25,000</option>
                            <option value="25000+">₹25,000+</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label class="filter-label">Date Range</label>
                        <input type="date" id="dateFromFilter" class="filter-input">
                    </div>
                </div>
                <div class="filter-actions">
                    <button class="btn-text" onclick="clearFilters()">Clear All</button>
                    <button class="btn-primary" onclick="applyFilters()">Apply Filters</button>
                </div>
            </div>
        </div>

        <div class="card-modern">
            <div class="table-header">
                <div class="table-title"><span id="resultsCount">0</span> Transactions</div>
                <div class="table-tabs">
                    <button class="tab-btn active" onclick="filterByTime('today')">Today</button>
                    <button class="tab-btn" onclick="filterByTime('week')">This Week</button>
                    <button class="tab-btn" onclick="filterByTime('month')">This Month</button>
                    <button class="tab-btn" onclick="filterByTime('all')">All Time</button>
                </div>
            </div>

            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Transaction ID</th>
                            <th>Merchant</th>
                            <th>Customer</th>
                            <th>Amount</th>
                            <th>Payment Method</th>
                            <th>Status</th>
                            <th>Date & Time</th>
                            <th style="width: 100px; text-align: center;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="transactionsTableBody"></tbody>
                </table>
            </div>

            <div id="emptyState" class="empty-state" style="display: none;">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
                <h3>No Transactions Found</h3>
                <p>No transactions match your current filters.</p>
            </div>

            <div class="pagination-wrapper" id="paginationWrapper">
                <div class="pagination-info">Showing <span id="showingFrom">1</span> to <span id="showingTo">10</span> of <span id="totalRecords">0</span> entries</div>
                <div class="pagination-controls" id="paginationControls"></div>
                <div class="pagination-size">
                    <select id="pageSizeSelect" onchange="changePageSize()">
                        <option value="10">10 per page</option>
                        <option value="25">25 per page</option>
                        <option value="50">50 per page</option>
                        <option value="100">100 per page</option>
                    </select>
                </div>
            </div>
        </div>
    `
}) %>
